<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FLIPS Rabdan - Daily Security Checklist</title>

<style>
  body {font-family: Arial, sans-serif; padding: 15px; background: #f4f4f4;}
  .title-box {background:#003366; color:white; padding:18px; border-radius:12px; text-align:center; margin-bottom:20px;}
  .title-main {font-size:22px; font-weight:bold;}
  .title-sub-big {font-size:26px; font-weight:bold; margin-top:10px;}
  .title-small {font-size:16px; margin-top:6px; opacity:0.95;}
  h2 {margin-top: 25px; background: #0066cc; color: white; padding: 10px; border-radius: 6px; font-size: 17px;}
  .item {background: white; margin: 8px 0; padding: 12px; border-radius: 6px; font-size: 16px; border-left: 4px solid #0066cc;}
  select, input[type="text"], input[type="date"], textarea {font-size:16px; padding:8px; width:100%; margin-top:4px; border-radius:6px; box-sizing:border-box;}
  textarea {min-height:80px; resize:vertical;}
  .section-box {background:white; padding:12px; border-radius:8px; margin-bottom:15px; border-left:4px solid:#003366;}
  label {font-weight:bold;}
  #submitBtn {width:100%; padding:12px; font-size:18px; margin-top:20px; border:none; border-radius:8px; background:#007bff; color:white; cursor:pointer;}
  #submitBtn:disabled {opacity:.6; cursor:not-allowed;}
  .note {font-size:13px; color:#555; margin-top:10px; text-align:center;}
</style>
</head>

<body>

<div class="title-box">
  <div class="title-main">Future Leaders International Private School Rabdan Branch</div>
  <div class="title-sub-big">Daily Security Checklist</div>
  <div class="title-small">HSE Section</div>
</div>

<form id="checklistForm">

  <div class="section-box">
    <label>Date:</label>
    <input type="date" name="date" required>

    <br><br>
    <label>Shift:</label>
    <select name="shift" required>
      <option value="">Select shift</option>
      <option value="Day">Day</option>
      <option value="Night">Night</option>
    </select>

    <br><br>
    <label>Security Guard Name:</label>
    <input type="text" name="securityName" placeholder="Enter security guard name" required>

    <br><br>
    <label>Remarks / Notes:</label>
    <textarea name="notes" placeholder="Enter any incidents, observations, or follow-up actions required"></textarea>
  </div>

  <!-- Helper -->
  <script>
    function yn(name){
      return `
      <select name="${name}" required>
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
        <option value="N/A">N/A</option>
      </select>`;
    }
  </script>

  <h2>Access Control & Gates</h2>
  <div class="item"><div>Gates operational & locks working</div><script>document.write(yn("ac_gatesLocks"));</script></div>
  <div class="item"><div>Visitor entry logged</div><script>document.write(yn("ac_visitorLogged"));</script></div>
  <div class="item"><div>No unauthorized entry</div><script>document.write(yn("ac_noUnauthorized"));</script></div>
  <div class="item"><div>Staircases & elevators securely closed</div><script>document.write(yn("ac_stairsElevClosed"));</script></div>

  <h2>CCTV System</h2>
  <div class="item"><div>All cameras functioning</div><script>document.write(yn("cctv_allCameras"));</script></div>
  <div class="item"><div>NVR/DVR active</div><script>document.write(yn("cctv_nvrDvr"));</script></div>
  <div class="item"><div>No blind spots</div><script>document.write(yn("cctv_noBlindSpots"));</script></div>
  <div class="item"><div>Lenses clean</div><script>document.write(yn("cctv_lensesClean"));</script></div>
  <div class="item"><div>Night vision checked</div><script>document.write(yn("cctv_nightVision"));</script></div>
  <div class="item"><div>Live monitoring done</div><script>document.write(yn("cctv_liveMonitoring"));</script></div>
  <div class="item"><div>CCTV control room secure</div><script>document.write(yn("cctv_controlRoomSecure"));</script></div>

  <h2>Perimeter & Outdoor Patrol</h2>
  <div class="item"><div>Fence/walls intact</div><script>document.write(yn("per_fenceWalls"));</script></div>
  <div class="item"><div>Exterior gates secure</div><script>document.write(yn("per_extGates"));</script></div>
  <div class="item"><div>Parking safe & well-lit</div><script>document.write(yn("per_parkingSafe"));</script></div>
  <div class="item"><div>Waste area safe</div><script>document.write(yn("per_wasteAreaSafe"));</script></div>
  <div class="item"><div>External exits clear</div><script>document.write(yn("per_externalExitsClear"));</script></div>

  <h2>Internal Building Patrol</h2>
  <div class="item"><div>Doors & windows secured</div><script>document.write(yn("int_doorsWindows"));</script></div>
  <div class="item"><div>Emergency exits clear</div><script>document.write(yn("int_emergencyExits"));</script></div>
  <div class="item"><div>Emergency lighting OK</div><script>document.write(yn("int_emergencyLighting"));</script></div>
  <div class="item"><div>Fire extinguishers sealed</div><script>document.write(yn("int_fireExtSealed"));</script></div>
  <div class="item"><div>Hose reels accessible</div><script>document.write(yn("int_hoseReels"));</script></div>
  <div class="item"><div>Fire panel status normal</div><script>document.write(yn("int_firePanel"));</script></div>
  <div class="item"><div>Restricted rooms secured (Electrical room, Pump room, Server room & Stores)</div><script>document.write(yn("int_restrictedRooms"));</script></div>

  <h2>Student & Staff Safety</h2>
  <div class="item"><div>Arrival supervised</div><script>document.write(yn("ss_arrival"));</script></div>
  <div class="item"><div>Dismissal supervised</div><script>document.write(yn("ss_dismissal"));</script></div>
  <div class="item"><div>No crowding at gates</div><script>document.write(yn("ss_noCrowding"));</script></div>

  <h2>Environmental & Housekeeping</h2>
  <div class="item"><div>Waste bins OK</div><script>document.write(yn("eh_wasteBins"));</script></div>
  <div class="item"><div>AC/electrical rooms safe</div><script>document.write(yn("eh_acRoomsSafe"));</script></div>
  <div class="item"><div>No chemical hazards</div><script>document.write(yn("eh_noChemical"));</script></div>
  <div class="item"><div>No water stagnation</div><script>document.write(yn("eh_noStagnation"));</script></div>
  <div class="item"><div>Noise levels normal</div><script>document.write(yn("eh_noiseNormal"));</script></div>

  <h2>Traffic & Parking</h2>
  <div class="item"><div>Bus area monitored</div><script>document.write(yn("tp_busArea"));</script></div>
  <div class="item"><div>Fire route accessible</div><script>document.write(yn("tp_fireRoute"));</script></div>

  <h2>Reporting & Documentation</h2>
  <div class="item"><div>CCTV incidents logged</div><script>document.write(yn("rd_cctvLogged"));</script></div>
  <div class="item"><div>Visitor logs updated</div><script>document.write(yn("rd_visitorLogs"));</script></div>

  <h2>Emergency Preparedness</h2>
  <div class="item"><div>Fire alarm normal</div><script>document.write(yn("ep_fireAlarm"));</script></div>
  <div class="item"><div>Extinguishers accessible</div><script>document.write(yn("ep_extAccessible"));</script></div>
  <div class="item"><div>First aid kits stocked</div><script>document.write(yn("ep_firstAid"));</script></div>
  <div class="item"><div>Assembly signage visible</div><script>document.write(yn("ep_assemblySignage"));</script></div>
  <div class="item"><div>Emergency access clear</div><script>document.write(yn("ep_emergencyAccess"));</script></div>

  <button id="submitBtn" type="submit">SUBMIT</button>
  <div class="note">PDF will be emailed automatically after submit.</div>
</form>

<script>
  // ✅ PUT YOUR SECURITY WEB APP URL HERE
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwT4ULM7oN_DssX4D4ihq802IWmrVAGynsyUkuMJLk6Ed3MtN-P8r4KYmsaO7yF_fdx/exec";

  // ✅ Your email (also BR1-OHS is added in Code.gs automatically)
  const RECEIVER_EMAIL = "partygifts850@gmail.com";

  const form = document.getElementById("checklistForm");
  const btn = document.getElementById("submitBtn");

  function collectFormData() {
    const data = {};
    form.querySelectorAll("input, select, textarea").forEach(el => {
      if (!el.name) return;
      data[el.name] = (el.value || "").trim();
    });
    data.receiverEmail = RECEIVER_EMAIL;
    return data;
  }

  form.addEventListener("submit", async (ev) => {
    ev.preventDefault();
    btn.disabled = true;

    try {
      const res = await fetch(WEB_APP_URL, {
        method: "POST",
        headers: { "Content-Type": "text/plain;charset=utf-8" },
        body: JSON.stringify(collectFormData())
      });

      const txt = (await res.text()).trim();
      if (txt === "OK") {
        alert("Sent successfully ✅ Check your email.");
        form.reset();
      } else {
        alert("Server replied: " + txt);
      }
    } catch (e) {
      alert("Send failed: " + e);
    } finally {
      btn.disabled = false;
    }
  });
</script>

</body>
</html>
